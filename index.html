<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>One Decision · Leadership Guide</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Bebas+Neue&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; }
    body {
      background: linear-gradient(160deg, #0d1f3c 0%, #0a1628 50%, #07111f 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: 'Crimson Text', Georgia, serif;
      overflow-x: hidden;
    }
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: rgba(194,154,108,0.3); border-radius: 2px; }
    @keyframes fadeUp { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes pulse { 0%, 80%, 100% { opacity: 0.3; transform: scale(0.8); } 40% { opacity: 1; transform: scale(1); } }
    .message-in { animation: fadeUp 0.3s ease forwards; }

    #header {
      width: 100%; border-bottom: 1px solid rgba(194,154,108,0.2);
      padding: 18px 24px; display: flex; align-items: center; gap: 12px;
      background: rgba(10,22,40,0.85); backdrop-filter: blur(12px);
      position: sticky; top: 0; z-index: 10;
    }
    .header-icon {
      width: 36px; height: 36px; background: rgba(194,154,108,0.12);
      border: 1px solid rgba(194,154,108,0.4); border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      color: #c29a6c; flex-shrink: 0;
    }
    .header-title { font-family: 'Bebas Neue', sans-serif; font-size: 18px; letter-spacing: 2px; color: #fff; line-height: 1; }
    .header-sub { font-size: 11px; color: rgba(194,154,108,0.75); letter-spacing: 1px; text-transform: uppercase; margin-top: 3px; }

    #chat-area {
      flex: 1; width: 100%; max-width: 720px; overflow-y: auto;
      padding: 32px 20px 0; display: flex; flex-direction: column; gap: 24px;
      scrollbar-width: thin; scrollbar-color: rgba(194,154,108,0.3) transparent;
    }
    #welcome { display: flex; flex-direction: column; gap: 24px; }
    .welcome-title { font-family: 'Bebas Neue', sans-serif; font-size: clamp(32px, 8vw, 46px); letter-spacing: 4px; color: #fff; line-height: 1; text-align: center; }
    .welcome-sub { font-style: italic; font-size: 17px; color: rgba(194,154,108,0.9); margin-top: 10px; text-align: center; }
    .divider { height: 1px; background: linear-gradient(to right, transparent, rgba(194,154,108,0.4), transparent); }
    .welcome-desc { color: rgba(220,220,230,0.75); font-size: 15px; line-height: 1.75; text-align: center; }
    .starters { display: flex; flex-direction: column; gap: 10px; }
    .starter-btn {
      background: rgba(255,255,255,0.05); border: 1px solid rgba(194,154,108,0.3);
      border-radius: 8px; padding: 12px 16px; color: #e8e8e8;
      font-family: 'Crimson Text', Georgia, serif; font-size: 15px;
      text-align: left; cursor: pointer; line-height: 1.5; transition: all 0.2s ease; width: 100%;
    }
    .starter-btn:hover { background: rgba(194,154,108,0.12); border-color: rgba(194,154,108,0.6); color: #fff; }

    .msg-row { display: flex; flex-direction: column; }
    .msg-row.user { align-items: flex-end; }
    .msg-row.assistant { align-items: flex-start; }
    .msg-bubble-user {
      background: rgba(194,154,108,0.15); border: 1px solid rgba(194,154,108,0.3);
      border-radius: 12px 12px 2px 12px; padding: 13px 17px; max-width: 82%;
      color: #fff; font-size: 16px; line-height: 1.6;
    }
    .msg-label { font-family: 'Bebas Neue', sans-serif; font-size: 11px; letter-spacing: 2px; color: rgba(194,154,108,0.6); margin-bottom: 8px; }
    .msg-text { color: #f0f0f0; font-size: 16.5px; line-height: 1.8; white-space: pre-wrap; max-width: 94%; }
    .msg-followup { margin-top: 14px; max-width: 94%; }
    .msg-followup-line1 { font-family: 'Bebas Neue', sans-serif; font-size: 13px; letter-spacing: 1.5px; color: rgba(194,154,108,0.8); }
    .msg-followup-line2 { font-size: 12px; letter-spacing: 1px; color: rgba(194,154,108,0.45); margin-top: 3px; text-transform: uppercase; }

    #typing { display: none; flex-direction: column; align-items: flex-start; }
    .dots-wrap {
      background: rgba(255,255,255,0.05); border: 1px solid rgba(194,154,108,0.2);
      border-radius: 12px; padding: 14px 18px; display: flex; align-items: center;
    }
    .dot { display: inline-block; width: 6px; height: 6px; border-radius: 50%; background: #c29a6c; margin: 0 2px; animation: pulse 1.4s infinite; }
    .dot:nth-child(2) { animation-delay: 0.2s; }
    .dot:nth-child(3) { animation-delay: 0.4s; }

    #input-area {
      width: 100%; max-width: 720px; padding: 16px 20px 24px;
      background: linear-gradient(to top, #0a1628 75%, transparent);
      position: sticky; bottom: 0;
    }
    .input-box {
      display: flex; gap: 10px; align-items: flex-end;
      background: rgba(255,255,255,0.07); border: 1px solid rgba(194,154,108,0.35);
      border-radius: 12px; padding: 10px 10px 10px 16px; transition: border-color 0.2s, box-shadow 0.2s;
    }
    .input-box:focus-within { border-color: rgba(194,154,108,0.7); box-shadow: 0 0 0 3px rgba(194,154,108,0.08); }
    #user-input {
      flex: 1; background: transparent; border: none; color: #fff;
      font-family: 'Crimson Text', Georgia, serif; font-size: 16px; line-height: 1.6;
      min-height: 28px; max-height: 120px; resize: none; scrollbar-width: thin; outline: none;
    }
    #user-input::placeholder { color: rgba(255,255,255,0.3); }
    #send-btn {
      width: 36px; height: 36px; border-radius: 8px; background: rgba(194,154,108,0.85);
      border: none; cursor: pointer; display: flex; align-items: center; justify-content: center;
      color: #0a1628; flex-shrink: 0; transition: background 0.2s;
    }
    #send-btn:hover:not(:disabled) { background: rgba(194,154,108,1); }
    #send-btn:disabled { opacity: 0.35; cursor: not-allowed; }
    .footer-note { text-align: center; margin-top: 10px; font-size: 12px; color: rgba(194,154,108,0.4); }
  </style>
</head>
<body>

  <div id="header">
    <div class="header-icon">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
      </svg>
    </div>
    <div>
      <div class="header-title">ONE DECISION</div>
      <div class="header-sub">Leadership Guide · J. Michael Reynolds</div>
    </div>
  </div>

  <div id="chat-area">
    <div id="welcome" class="message-in">
      <div>
        <div class="welcome-title">LEAD OR STEP ASIDE</div>
        <div class="welcome-sub">What situation are you navigating?</div>
      </div>
      <div class="divider"></div>
      <p class="welcome-desc">Describe what you're dealing with. Be specific. You'll get a direct response grounded in the principles from <em>One Decision</em> — not generic advice.</p>
      <div class="starters" id="starters">
        <button class="starter-btn">"I have a team member who's underperforming but I keep avoiding the conversation."</button>
        <button class="starter-btn">"I'm doing everything myself because I don't trust my team to do it right."</button>
        <button class="starter-btn">"My team doesn't seem bought in to the direction I've set."</button>
        <button class="starter-btn">"I feel like I'm managing instead of leading but I don't know how to change it."</button>
      </div>
    </div>
    <div id="typing">
      <div class="msg-label">ONE DECISION GUIDE</div>
      <div class="dots-wrap">
        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
      </div>
    </div>
    <div id="scroll-anchor"></div>
  </div>

  <div id="input-area">
    <div class="input-box">
      <textarea id="user-input" placeholder="Describe your situation..." rows="1"></textarea>
      <button id="send-btn" disabled>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="22" y1="2" x2="11" y2="13"/>
          <polygon points="22 2 15 22 11 13 2 9 22 2"/>
        </svg>
      </button>
    </div>
    <div class="footer-note">Powered by <em>One Decision</em> · For deeper work — <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5c1f333d3f341135373915322f2c352e392f1c3b313d3530723f3331">[email&#160;protected]</a> · 916.230.0278</div>
  </div>

  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
    const STARTERS = [
      "I have a team member who's underperforming but I keep avoiding the conversation.",
      "I'm doing everything myself because I don't trust my team to do it right.",
      "My team doesn't seem bought in to the direction I've set.",
      "I feel like I'm managing instead of leading but I don't know how to change it.",
    ];

    const chatArea = document.getElementById('chat-area');
    const welcome  = document.getElementById('welcome');
    const typing   = document.getElementById('typing');
    const input    = document.getElementById('user-input');
    const sendBtn  = document.getElementById('send-btn');
    const anchor   = document.getElementById('scroll-anchor');

    let messages = [];
    let loading  = false;

    document.querySelectorAll('.starter-btn').forEach(btn => {
      btn.addEventListener('click', () => sendMessage(btn.textContent.replace(/^"|"$/g, '')));
    });

    input.addEventListener('input', () => {
      input.style.height = 'auto';
      input.style.height = Math.min(input.scrollHeight, 120) + 'px';
      sendBtn.disabled = !input.value.trim() || loading;
    });

    input.addEventListener('keydown', e => {
      if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); }
    });

    sendBtn.addEventListener('click', () => sendMessage());

    function scrollToBottom() { anchor.scrollIntoView({ behavior: 'smooth' }); }

    function appendMessage(role, content) {
      const row = document.createElement('div');
      row.className = `msg-row ${role} message-in`;
      if (role === 'user') {
        const bubble = document.createElement('div');
        bubble.className = 'msg-bubble-user';
        bubble.textContent = content;
        row.appendChild(bubble);
      } else {
        const label = document.createElement('div');
        label.className = 'msg-label';
        label.textContent = 'ONE DECISION GUIDE';
        const text = document.createElement('div');
        text.className = 'msg-text';
        text.textContent = content;
        const followup = document.createElement('div');
        followup.className = 'msg-followup';
        followup.innerHTML = '<div class="msg-followup-line1">What other priority situation needs attention?</div><div class="msg-followup-line2">Enter below.</div>';
        row.appendChild(label);
        row.appendChild(text);
        row.appendChild(followup);
      }
      chatArea.insertBefore(row, typing);
      scrollToBottom();
    }

    async function sendMessage(text) {
      const userText = (text || input.value).trim();
      if (!userText || loading) return;
      welcome.style.display = 'none';
      input.value = '';
      input.style.height = 'auto';
      sendBtn.disabled = true;
      messages.push({ role: 'user', content: userText });
      appendMessage('user', userText);
      loading = true;
      typing.style.display = 'flex';
      scrollToBottom();
      try {
        const res  = await fetch('/api/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ messages }),
        });
        const data  = await res.json();
        const reply = data.reply || 'Something went wrong. Try again.';
        messages.push({ role: 'assistant', content: reply });
        typing.style.display = 'none';
        appendMessage('assistant', reply);
      } catch {
      
      
